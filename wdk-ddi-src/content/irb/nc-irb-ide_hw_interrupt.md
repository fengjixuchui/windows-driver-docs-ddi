---
UID: NC:irb.IDE_HW_INTERRUPT
title: IDE_HW_INTERRUPT (irb.h)
description: The IdeHwInterrupt miniport driver routine handles interrupts from the host bus adapter (HBA) to which the controller for the miniport driver is connected.
old-location: storage\idehwinterrupt.htm
tech.root: storage
ms.assetid: a061d993-78fc-45d8-857b-7269c3593847
ms.date: 03/29/2018
ms.keywords: IDE_HW_INTERRUPT, IdeHwInterrupt, IdeHwInterrupt routine [Storage Devices], atartns_6568f61d-e6f7-4d16-98ed-72c13aac0fe7.xml, irb/IdeHwInterrupt, storage.idehwinterrupt
ms.topic: callback
f1_keywords:
 - "irb/IdeHwInterrupt"
req.header: irb.h
req.include-header: Irb.h
req.target-type: Desktop
req.target-min-winverclnt: 
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: 
req.dll: 
req.irql: 
topic_type:
- APIRef
- kbSyntax
api_type:
- UserDefined
api_location:
- irb.h
api_name:
- IdeHwInterrupt
product:
- Windows
targetos: Windows
req.typenames: 
---

# IDE_HW_INTERRUPT callback function


## -description


The <b><i>IdeHwInterrupt</i></b> miniport driver routine handles interrupts from the host bus adapter (HBA) to which the controller for the miniport driver is connected. 
<div class="alert"><b>Note</b>  The ATA port driver and ATA miniport driver models may be altered or unavailable in the future. Instead, we recommend using the <a href="https://docs.microsoft.com/windows-hardware/drivers/storage/storport-driver">Storport driver</a> and <a href="https://docs.microsoft.com/windows-hardware/drivers/storage/storport-miniport-drivers">Storport miniport</a> driver models.</div><div> </div>

## -parameters




### -param ChannelExtension [in]

A pointer to the channel extension.


## -returns



<b><i>AtaHwInterrrupt</i></b> returns <b>TRUE</b> if the interrupt is generated by one of the controller's channels. If a channel did not generate the interrupt, the routine should return <b>FALSE</b> as quickly as possible. 




## -remarks



The <b><i>IdeHwInterrupt</i></b> routine completes interrupt-driven I/O operations. 

If the indicated channel did not generate the interrupt, the miniport driver should make a second (recursive) call to the <b><i>IdeHwInterrupt</i></b> routine to handle interrupts that are intended for the controller's other channel.

If the miniport driver requires a large amount of time to process the interrupt, it must follow these steps:

<ol>
<li>
Dismiss the interrupt on the HBA.

</li>
<li>
Disable interrupts on the channel that is indicated by the <i>ChannelExtension</i> parameter. 

</li>
<li>
Request a worker routine by using <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/irb/nf-irb-ataportrequestworkerroutine">AtaPortRequestWorkerRoutine</a>. 

</li>
<li>
Complete additional processing in the worker routine.

</li>
<li>
Enable interrupts on the channel.

</li>
</ol>
The following ATA port routines must not be called from the <b><i>IdeHwInterrupt</i></b> routine:

<ul>
<li>

<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/irb/nf-irb-ataportcompleteallactiverequests">AtaPortCompleteAllActiveRequests</a>


</li>
<li>

<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/irb/nf-irb-ataportdevicebusy">AtaPortDeviceBusy</a>


</li>
</ul>
However, the miniport driver can request a worker routine and make calls in the worker routine.

The worker routine must clear the interrupt on the HBA before it returns <b>TRUE</b>.




## -see-also




<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/irb/nf-irb-ataportcompleteallactiverequests">AtaPortCompleteAllActiveRequests</a>



<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/irb/nf-irb-ataportdevicebusy">AtaPortDeviceBusy</a>



<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/irb/nf-irb-ataportrequestworkerroutine">AtaPortRequestWorkerRoutine</a>
 

 

