---
UID: NF:wmilib.WmiFireEvent
title: WmiFireEvent function (wmilib.h)
description: The WmiFireEvent routine sends an event to WMI for delivery to data consumers that have requested notification of the event.
old-location: kernel\wmifireevent.htm
tech.root: kernel
ms.assetid: 600391ef-f4bb-479b-ad73-305e365ed70d
ms.date: 04/30/2018
ms.keywords: WmiFireEvent, WmiFireEvent routine [Kernel-Mode Driver Architecture], k902_bae3b7d7-89d9-4ab9-8f26-2bd12e6b6caa.xml, kernel.wmifireevent, wmilib/WmiFireEvent
ms.topic: function
req.header: wmilib.h
req.include-header: Wmilib.h
req.target-type: Universal
req.target-min-winverclnt: Available starting with Windows 2000.
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: Wmilib.lib
req.dll: 
req.irql: "<= DISPATCH_LEVEL"
topic_type:
- APIRef
- kbSyntax
api_type:
- LibDef
api_location:
- Wmilib.lib
- Wmilib.dll
api_name:
- WmiFireEvent
product:
- Windows
targetos: Windows
req.typenames: 
---

# WmiFireEvent function


## -description


The <b>WmiFireEvent</b> routine sends an event to WMI for delivery to data consumers that have requested notification of the event.


## -parameters




### -param DeviceObject [in]

A pointer to the driver's <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wdm/ns-wdm-_device_object">DEVICE_OBJECT</a>. 


### -param Guid [in]

A pointer to the GUID that represents the event block. 


### -param InstanceIndex [in]

If the event block has multiple instances, specifies the index of the instance. 


### -param EventDataSize [in]

Specifies the number of bytes of data at <i>EventData</i>. If no data is generated for an event, <i>EventData</i> must be zero. 


### -param EventData [in, optional]

A pointer to a driver-allocated nonpaged buffer containing data generated by the driver for the event. If no data is generated for an event, <i>EventData</i> must be <b>NULL</b>. WMI frees the buffer without further intervention by the driver. 


## -returns



<b>WmiFireEvent</b> propagates the status returned by <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wdm/nf-wdm-iowmiwriteevent">IoWmiWriteEvent</a>, or returns STATUS_INSUFFICIENT_RESOURCES if it could not allocate memory for the event.




## -remarks



A driver calls <b>WmiFireEvent</b> to send an event to WMI for delivery to all data consumers that have requested notification of the event. All pointers passed to <b>WmiFireEvent</b> must point to nonpagable memory, such as nonpaged pool.

The driver sends an event only if it has been previously enabled by the driver's <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wmilib/nc-wmilib-wmi_function_control_callback">DpWmiFunctionControl</a> routine, which WMI calls to process an <b>IRP_MN_ENABLE_EVENT</b> request.

The driver writes any data associated with the event to the buffer at <i>EventData</i>. WMI fills in a <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wmistr/ns-wmistr-tagwnode_single_instance">WNODE_SINGLE_INSTANCE</a> structure with the data and calls <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wdm/nf-wdm-iowmiwriteevent">IoWmiWriteEvent</a> to deliver the event.

For more information about event tracing, see <a href="https://docs.microsoft.com/windows-hardware/drivers/kernel/wmi-event-tracing">WMI Event Tracing</a>. 




## -see-also




<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wmilib/nc-wmilib-wmi_function_control_callback">DpWmiFunctionControl</a>



<a href="https://docs.microsoft.com/windows-hardware/drivers/kernel/irp-mn-enable-events">IRP_MN_ENABLE_EVENTS</a>



<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wmilib/nf-wmilib-wmisystemcontrol">WmiSystemControl</a>
 

 

